-- Script Rayfield para eliminar TODOS los scripts de da√±o UNIVERSALMENTE
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

-- Protecci√≥n contra errores
local function safeCall(func, ...)
    local success, result = pcall(func, ...)
    if not success then
        print("‚ö†Ô∏è Error en funci√≥n:", result)
    end
    return success, result
end

-- Funci√≥n DIRECTA para eliminar DamagePart de workspace.place
local function eliminatePlaceDamageParts()
    local scriptsDestroyed = 0
    
    -- Buscar en workspace.place
    if workspace:FindFirstChild("place") then
        local place = workspace.place
        print("üè¢ workspace.place encontrado, buscando DamagePart...")
        
        -- Funci√≥n recursiva para buscar DamagePart en cualquier nivel
        local function searchDamagePartsRecursively(parent, path)
            for _, child in pairs(parent:GetChildren()) do
                local currentPath = path .. "." .. child.Name
                
                -- Si encuentra DamagePart, eliminarlo
                if string.find(child.Name:lower(), "damage") then
                    child:Destroy()
                    print("üí• DamagePart eliminado en:", currentPath)
                    scriptsDestroyed = scriptsDestroyed + 1
                end
                
                -- Buscar recursivamente en los hijos
                searchDamagePartsRecursively(child, currentPath)
            end
        end
        
        searchDamagePartsRecursively(place, "workspace.place")
    else
        print("‚ÑπÔ∏è workspace.place no encontrado")
    end
    
    return scriptsDestroyed
end

-- Funci√≥n DIRECTA para eliminar TakeDamage y TouchInterest de IcicleZombie
local function eliminateIcicleZombieScripts()
    local scriptsDestroyed = 0
    
    -- Buscar espec√≠ficamente IcicleZombie
    if workspace:FindFirstChild("Folder") and workspace.Folder:FindFirstChild("IcicleZombie") then
        local icicleZombie = workspace.Folder.IcicleZombie
        print("üßä IcicleZombie encontrado, eliminando scripts...")
        
        -- Eliminar TakeDamage y TouchInterest del Part
        if icicleZombie:FindFirstChild("Part") then
            local part = icicleZombie.Part
            
            if part:FindFirstChild("TakeDamage") then
                part.TakeDamage:Destroy()
                print("üíÄ TakeDamage eliminado de IcicleZombie.Part")
                scriptsDestroyed = scriptsDestroyed + 1
            end
            
            if part:FindFirstChild("TouchInterest") then
                part.TouchInterest:Destroy()
                print("üëÜ TouchInterest eliminado de IcicleZombie.Part")
                scriptsDestroyed = scriptsDestroyed + 1
            end
            
            -- Eliminar TODOS los elementos del Part por seguridad
            local children = part:GetChildren()
            for i = #children, 1, -1 do
                local child = children[i]
                if child and child.Name ~= "Mesh" and child.Name ~= "SpecialMesh" then
                    child:Destroy()
                    print("üóëÔ∏è Elemento eliminado de IcicleZombie.Part:", child.Name)
                    scriptsDestroyed = scriptsDestroyed + 1
                end
            end
        end
        
        -- Eliminar otros scripts peligrosos del modelo
        local dangerousScripts = {"AI Chase", "NPC", "Respawn", "Weld"}
        for _, scriptName in pairs(dangerousScripts) do
            if icicleZombie:FindFirstChild(scriptName) then
                icicleZombie[scriptName]:Destroy()
                print("üíÄ Script eliminado de IcicleZombie:", scriptName)
                scriptsDestroyed = scriptsDestroyed + 1
            end
        end
    else
        print("‚ÑπÔ∏è IcicleZombie no encontrado")
    end
    
    return scriptsDestroyed
end

-- Funci√≥n espec√≠fica para eliminar modelos peligrosos completamente
local function eliminateDangerousModels()
    local dangerousModels = {}
    local modelsEliminated = 0
    
    -- Buscar modelos peligrosos por nombre
    local dangerousNames = {"zombie", "enemy", "monster", "killer", "damage", "attack", "hostile"}
    
    local allModels = getAllModelsRecursively()
    for _, model in pairs(allModels) do
        if model and model.Parent then
            local modelName = model.Name:lower()
            for _, dangerousName in pairs(dangerousNames) do
                if string.find(modelName, dangerousName) then
                    table.insert(dangerousModels, model)
                    break
                end
            end
        end
    end
    
    -- Eliminar COMPLETAMENTE los modelos peligrosos
    for _, model in pairs(dangerousModels) do
        safeCall(function()
            print("üí• ELIMINANDO MODELO PELIGROSO COMPLETAMENTE:", model.Name)
            model:Destroy()
            modelsEliminated = modelsEliminated + 1
        end)
    end
    
    print("üí• Modelos peligrosos eliminados completamente:", modelsEliminated)
    return modelsEliminated
end

-- Obtener nombres de los modelos originales
local originalModelNames = {}
local function getOriginalModelNames()
    local children = workspace.Folder:GetChildren()
    if children[36] then table.insert(originalModelNames, children[36].Name) end
    if children[41] then table.insert(originalModelNames, children[41].Name) end
    if workspace.Folder.Felipe then table.insert(originalModelNames, "Felipe") end
    if children[32] then table.insert(originalModelNames, children[32].Name) end
    if children[31] then table.insert(originalModelNames, children[31].Name) end
    if children[29] then table.insert(originalModelNames, children[29].Name) end
    if children[38] then table.insert(originalModelNames, children[38].Name) end
    if children[39] then table.insert(originalModelNames, children[39].Name) end
    if children[23] then table.insert(originalModelNames, children[23].Name) end
    if children[22] then table.insert(originalModelNames, children[22].Name) end
    if children[20] then table.insert(originalModelNames, children[20].Name) end
    if children[40] then table.insert(originalModelNames, children[40].Name) end
    if children[35] then table.insert(originalModelNames, children[35].Name) end
    if children[17] then table.insert(originalModelNames, children[17].Name) end
    if children[11] then table.insert(originalModelNames, children[11].Name) end
    if children[44] then table.insert(originalModelNames, children[44].Name) end
    
    print("Nombres de modelos detectados:", table.concat(originalModelNames, ", "))
end

-- Funci√≥n para obtener TODOS los modelos de TODA la workspace (REALMENTE UNIVERSAL)
local function getAllModelsRecursively()
    local allModels = {}
    
    -- Funci√≥n recursiva para buscar modelos en cualquier nivel
    local function findModelsRecursively(parent)
        for _, child in pairs(parent:GetChildren()) do
            if child:IsA("Model") then
                table.insert(allModels, child)
                -- Buscar recursivamente dentro del modelo
                findModelsRecursively(child)
            end
        end
    end
    
    -- Buscar en TODA la workspace (no solo en Folder)
    findModelsRecursively(workspace)
    
    -- Tambi√©n agregar workspace.place como "modelo" para procesarlo
    if workspace:FindFirstChild("place") then
        table.insert(allModels, workspace.place)
    end
    
    return allModels
end

-- Funci√≥n COMPLETAMENTE UNIVERSAL para eliminar scripts de da√±o de CUALQUIER LUGAR
local function removeDamageScripts()
    local allModels = getAllModelsRecursively()
    local totalScriptsDestroyed = 0
    
    for _, model in pairs(allModels) do
        safeCall(function()
            if model and model.Parent then
                print("üéØ Procesando modelo:", model.Name, "en", model.Parent.Name)
                
                local foundScripts = false
                
                -- M√âTODO ULTRA-UNIVERSAL: Buscar scripts de da√±o en CUALQUIER LUGAR del modelo
                local function searchAndDestroyScripts(object)
                    -- Eliminar scripts espec√≠ficos conocidos directamente (EXPANDIDO)
                    local scriptsToRemove = {"Killer", "TakeDamage", "TouchInterest", "LoadScript", "AI Chase", "NPC", "Respawn", "Weld", "Sound"}
                    for _, scriptName in pairs(scriptsToRemove) do
                        if object:FindFirstChild(scriptName) then
                            object[scriptName]:Destroy()
                            print("üíÄ Script", scriptName, "eliminado de", object.Name, "en", model.Name)
                            foundScripts = true
                            totalScriptsDestroyed = totalScriptsDestroyed + 1
                        end
                    end
                    
                    -- M√âTODO ULTRA-AGRESIVO PARA TAKEDAMAGE Y TOUCHINTEREST
                    for _, child in pairs(object:GetChildren()) do
                        if child.Name == "TakeDamage" or child.Name == "TouchInterest" then
                            child:Destroy()
                            print("üí• FORZADO:", child.Name, "eliminado de", object.Name, "en", model.Name)
                            foundScripts = true
                            totalScriptsDestroyed = totalScriptsDestroyed + 1
                        end
                    end
                    
                    -- M√âTODO ULTRA-AGRESIVO PARA CUALQUIER COSA CON "DAMAGE" EN EL NOMBRE
                    for _, child in pairs(object:GetChildren()) do
                        if string.find(child.Name:lower(), "damage") then
                            child:Destroy()
                            print("üí• DAMAGE ELIMINADO:", child.Name, "de", object.Name, "en", model.Name)
                            foundScripts = true
                            totalScriptsDestroyed = totalScriptsDestroyed + 1
                        end
                    end
                    
                    -- Eliminar Behaviours.Killer si existe
                    if object:FindFirstChild("Behaviours") and object.Behaviours:FindFirstChild("Killer") then
                        object.Behaviours.Killer:Destroy()
                        print("üíÄ Behaviours.Killer eliminado de", object.Name, "en", model.Name)
                        foundScripts = true
                        totalScriptsDestroyed = totalScriptsDestroyed + 1
                    end
                    
                    -- M√âTODO ESPEC√çFICO PARA ICICLE ZOMBIE Y SIMILARES
                    if object.Name == "Part" and object.Parent and (string.find(object.Parent.Name:lower(), "zombie") or string.find(object.Parent.Name:lower(), "enemy") or string.find(object.Parent.Name:lower(), "monster")) then
                        -- Eliminar TODOS los hijos del Part que puedan ser peligrosos
                        for i = #object:GetChildren(), 1, -1 do
                            local child = object:GetChildren()[i]
                            if child and child ~= object then
                                child:Destroy()
                                print("üßä Elemento peligroso eliminado:", child.Name, "de Part en", object.Parent.Name)
                                foundScripts = true
                                totalScriptsDestroyed = totalScriptsDestroyed + 1
                            end
                        end
                    end
                    
                    -- M√âTODO ULTRA-AGRESIVO: Eliminar TODOS los scripts del objeto
                    for _, child in pairs(object:GetChildren()) do
                        if child:IsA("LocalScript") or child:IsA("Script") or child:IsA("ModuleScript") then
                            child:Destroy()
                            print("üóëÔ∏è Script eliminado:", child.Name, "de", object.Name, "en", model.Name)
                            foundScripts = true
                            totalScriptsDestroyed = totalScriptsDestroyed + 1
                        end
                    end
                end
                
                -- Buscar en TODOS los descendientes del modelo (no solo Part)
                for _, descendant in pairs(model:GetDescendants()) do
                    searchAndDestroyScripts(descendant)
                end
                
                -- Tambi√©n buscar en el modelo principal
                searchAndDestroyScripts(model)
                
                if not foundScripts then
                    print("‚úÖ No se encontraron scripts de da√±o en", model.Name)
                end
            end
        end)
    end
    
    return totalScriptsDestroyed
end

-- Variable para controlar el monitoreo continuo
local continuousConnection = nil

-- Funci√≥n para eliminar scripts de da√±o continuamente (detecta nuevos spawns)
local function startContinuousDamageScriptRemoval()
    local function removeDamageScriptsFromAllModels()
        local allModels = getAllModelsRecursively()
        for _, model in pairs(allModels) do
            safeCall(function()
                if model and model.Parent then
                    -- M√âTODO ULTRA-UNIVERSAL: Buscar scripts de da√±o en CUALQUIER LUGAR del modelo
                    local function searchAndDestroyScripts(object)
                        -- Eliminar scripts espec√≠ficos conocidos directamente (EXPANDIDO)
                        local scriptsToRemove = {"Killer", "TakeDamage", "TouchInterest", "LoadScript", "AI Chase", "NPC", "Respawn", "Weld", "Sound"}
                        for _, scriptName in pairs(scriptsToRemove) do
                            if object:FindFirstChild(scriptName) then
                                object[scriptName]:Destroy()
                                print("üíÄ Script", scriptName, "eliminado continuamente de", object.Name, "en", model.Name)
                            end
                        end
                        
                        -- M√âTODO ULTRA-AGRESIVO PARA TAKEDAMAGE Y TOUCHINTEREST (CONTINUO)
                        for _, child in pairs(object:GetChildren()) do
                            if child.Name == "TakeDamage" or child.Name == "TouchInterest" then
                                child:Destroy()
                                print("üí• FORZADO CONTINUO:", child.Name, "eliminado de", object.Name, "en", model.Name)
                            end
                        end
                        
                        -- M√âTODO ULTRA-AGRESIVO PARA CUALQUIER COSA CON "DAMAGE" (CONTINUO)
                        for _, child in pairs(object:GetChildren()) do
                            if string.find(child.Name:lower(), "damage") then
                                child:Destroy()
                                print("üí• DAMAGE ELIMINADO CONTINUO:", child.Name, "de", object.Name, "en", model.Name)
                            end
                        end
                        
                        -- Eliminar Behaviours.Killer si existe
                        if object:FindFirstChild("Behaviours") and object.Behaviours:FindFirstChild("Killer") then
                            object.Behaviours.Killer:Destroy()
                            print("üíÄ Behaviours.Killer eliminado continuamente de", object.Name, "en", model.Name)
                        end
                        
                        -- M√âTODO ESPEC√çFICO PARA ICICLE ZOMBIE Y SIMILARES (CONTINUO)
                        if object.Name == "Part" and object.Parent and (string.find(object.Parent.Name:lower(), "zombie") or string.find(object.Parent.Name:lower(), "enemy") or string.find(object.Parent.Name:lower(), "monster")) then
                            -- Eliminar TODOS los hijos del Part que puedan ser peligrosos
                            for i = #object:GetChildren(), 1, -1 do
                                local child = object:GetChildren()[i]
                                if child and child ~= object then
                                    child:Destroy()
                                    print("üßä Elemento peligroso eliminado continuamente:", child.Name, "de Part en", object.Parent.Name)
                                end
                            end
                        end
                        
                        -- M√âTODO ULTRA-AGRESIVO: Eliminar TODOS los scripts del objeto
                        for _, child in pairs(object:GetChildren()) do
                            if child:IsA("LocalScript") or child:IsA("Script") or child:IsA("ModuleScript") then
                                child:Destroy()
                                print("üóëÔ∏è Script eliminado continuamente:", child.Name, "de", object.Name, "en", model.Name)
                            end
                        end
                    end
                    
                    -- Buscar en TODOS los descendientes del modelo (no solo Part)
                    for _, descendant in pairs(model:GetDescendants()) do
                        searchAndDestroyScripts(descendant)
                    end
                    
                    -- Tambi√©n buscar en el modelo principal
                    searchAndDestroyScripts(model)
                end
            end)
        end
    end
    
    -- Ejecutar cada frame para detectar y eliminar scripts de da√±o de TODOS los modelos
    continuousConnection = RunService.Heartbeat:Connect(function()
        safeCall(removeDamageScriptsFromAllModels)
    end)
end

-- Funci√≥n para detener el monitoreo continuo
local function stopContinuousDamageScriptRemoval()
    if continuousConnection then
        continuousConnection:Disconnect()
        continuousConnection = nil
    end
end

-- Crear la ventana de Rayfield
local Window = Rayfield:CreateWindow({
    Name = "üíÄ Universal Script Damage Eliminator",
    LoadingTitle = "Cargando eliminador universal...",
    LoadingSubtitle = "Preparando eliminaci√≥n de scripts de da√±o",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "UniversalScriptEliminator",
        FileName = "Config"
    },
    Discord = {
        Enabled = false,
        Invite = "noinvitelink",
        RememberJoins = true
    },
    KeySystem = false
})

-- Crear pesta√±as
local Tab = Window:CreateTab("üíÄ Eliminaci√≥n Universal", 4483362458)
local StatsTab = Window:CreateTab("üìä Estad√≠sticas", 4483362458)

-- ===== PESTA√ëA DE ELIMINACI√ìN =====
-- Bot√≥n principal para eliminar todos los scripts de da√±o
local DestroyButton = Tab:CreateButton({
    Name = "üíÄ ELIMINAR TODOS LOS SCRIPTS DE DA√ëO",
    Callback = function()
        print("=== üíÄ‚öîÔ∏èüëÜüóëÔ∏è INICIANDO ELIMINACI√ìN UNIVERSAL ===")
        safeCall(getOriginalModelNames)
        local destroyed = safeCall(removeDamageScripts)
        
        Rayfield:Notify({
            Title = "üíÄ Eliminaci√≥n Completada",
            Content = "Scripts de da√±o eliminados: " .. (destroyed or 0),
            Duration = 5,
            Image = 4483362458,
        })
        
        print("üö´ TODOS LOS MODELOS YA NO PUEDEN CAUSAR DA√ëO")
    end,
})

-- Toggle para monitoreo continuo
local MonitorToggle = Tab:CreateToggle({
    Name = "üîÑ Monitoreo Continuo Universal",
    CurrentValue = false,
    Flag = "ContinuousUniversalMonitoring",
    Callback = function(Value)
        if Value then
            print("üîÑ Monitoreo continuo UNIVERSAL ACTIVADO")
            safeCall(startContinuousDamageScriptRemoval)
            Rayfield:Notify({
                Title = "üîÑ Monitoreo Universal",
                Content = "Monitoreo continuo activado - Eliminando scripts de da√±o autom√°ticamente",
                Duration = 3,
                Image = 4483362458,
            })
        else
            print("‚èπÔ∏è Monitoreo continuo DESACTIVADO")
            safeCall(stopContinuousDamageScriptRemoval)
            Rayfield:Notify({
                Title = "‚èπÔ∏è Monitoreo",
                Content = "Monitoreo continuo desactivado",
                Duration = 3,
                Image = 4483362458,
            })
        end
    end,
})

-- Bot√≥n espec√≠fico para workspace.place DamagePart
local PlaceDamageButton = Tab:CreateButton({
    Name = "üè¢ ELIMINAR workspace.place DamagePart",
    Callback = function()
        local destroyed = safeCall(eliminatePlaceDamageParts)
        Rayfield:Notify({
            Title = "üè¢ Place DamagePart",
            Content = "DamageParts eliminados: " .. (destroyed or 0),
            Duration = 3,
            Image = 4483362458,
        })
    end,
})

-- Bot√≥n espec√≠fico para IcicleZombie
local IcicleZombieButton = Tab:CreateButton({
    Name = "üßä ELIMINAR IcicleZombie.Part.TakeDamage",
    Callback = function()
        local destroyed = safeCall(eliminateIcicleZombieScripts)
        Rayfield:Notify({
            Title = "üßä IcicleZombie",
            Content = "Scripts eliminados: " .. (destroyed or 0),
            Duration = 3,
            Image = 4483362458,
        })
    end,
})

-- Bot√≥n para eliminar modelos peligrosos completamente
local DangerousModelsButton = Tab:CreateButton({
    Name = "üí• ELIMINAR MODELOS PELIGROSOS COMPLETAMENTE",
    Callback = function()
        local eliminated = safeCall(eliminateDangerousModels)
        Rayfield:Notify({
            Title = "üí• Modelos Eliminados",
            Content = "Modelos peligrosos eliminados: " .. (eliminated or 0),
            Duration = 3,
            Image = 4483362458,
        })
    end,
})

-- Bot√≥n para activar script completo autom√°ticamente
local AutoButton = Tab:CreateButton({
    Name = "üöÄ ACTIVAR SCRIPT COMPLETO AUTOM√ÅTICO",
    Callback = function()
        print("=== üíÄ‚öîÔ∏èüëÜüóëÔ∏è SCRIPT DAMAGE ELIMINATOR REALMENTE UNIVERSAL ACTIVADO ===")
        safeCall(getOriginalModelNames)
        safeCall(removeDamageScripts)
        safeCall(startContinuousDamageScriptRemoval)
        
        print("üîç Procesando TODOS los modelos de TODA la workspace (incluyendo anidados)")
        print("üíÄ Script Killer eliminado de CUALQUIER LUGAR del modelo")
        print("‚öîÔ∏è Script TakeDamage eliminado de CUALQUIER LUGAR del modelo")
        print("üëÜ TouchInterest eliminado de CUALQUIER LUGAR del modelo")
        print("üìú LoadScript eliminado de CUALQUIER LUGAR del modelo")
        print("üóëÔ∏è TODOS los scripts eliminados de CUALQUIER LUGAR del modelo")
        print("üéØ Monitorea TODA la workspace continuamente (incluyendo anidados)")
        print("üö´ TODOS LOS MODELOS YA NO PUEDEN CAUSAR DA√ëO - REALMENTE UNIVERSAL")
        
        Rayfield:Notify({
            Title = "üöÄ Script Universal Activado",
            Content = "Eliminaci√≥n autom√°tica y monitoreo continuo activados",
            Duration = 5,
            Image = 4483362458,
        })
    end,
})

-- Informaci√≥n
local InfoLabel = Tab:CreateLabel("üí° Informaci√≥n:")
local InfoLabel2 = Tab:CreateLabel("‚Ä¢ Eliminar Scripts: Elimina TODOS los scripts de da√±o una vez")
local InfoLabel3 = Tab:CreateLabel("‚Ä¢ Modelos Peligrosos: Elimina IcicleZombie y similares COMPLETAMENTE")
local InfoLabel4 = Tab:CreateLabel("‚Ä¢ Monitoreo: Elimina scripts continuamente (recomendado)")
local InfoLabel5 = Tab:CreateLabel("‚Ä¢ Script Completo: Activa todo autom√°ticamente")
local InfoLabel6 = Tab:CreateLabel("‚Ä¢ ‚úÖ UNIVERSAL: Funciona en TODA la workspace")
local InfoLabel7 = Tab:CreateLabel("‚Ä¢ üéØ Elimina: Killer, TakeDamage, AI Chase, NPC, Respawn, etc.")
local InfoLabel8 = Tab:CreateLabel("‚Ä¢ üíÄ Tambi√©n elimina Behaviours.Killer y TODOS los scripts")

-- ===== PESTA√ëA DE ESTAD√çSTICAS =====
local StatsLabel = StatsTab:CreateLabel("üìä Estad√≠sticas Universales:")
local ModelsLabel = StatsTab:CreateLabel("Modelos en workspace: 0")
local ScriptsLabel = StatsTab:CreateLabel("Scripts encontrados: 0")
local MonitoringLabel = StatsTab:CreateLabel("Monitoreo continuo: Desactivado")

-- Funci√≥n para actualizar estad√≠sticas
local function updateStats()
    local allModels = getAllModelsRecursively()
    local scriptsCount = 0
    
    for _, model in pairs(allModels) do
        for _, descendant in pairs(model:GetDescendants()) do
            if descendant:IsA("LocalScript") or descendant:IsA("Script") or descendant:IsA("ModuleScript") then
                scriptsCount = scriptsCount + 1
            end
        end
    end
    
    ModelsLabel:Set("Modelos en workspace: " .. #allModels)
    ScriptsLabel:Set("Scripts encontrados: " .. scriptsCount)
    MonitoringLabel:Set("Monitoreo continuo: " .. (continuousConnection and "Activado" or "Desactivado"))
end

-- Actualizar estad√≠sticas cada 2 segundos
spawn(function()
    while true do
        updateStats()
        wait(2)
    end
end)

-- Notificaci√≥n de bienvenida
Rayfield:Notify({
    Title = "üíÄ Universal Script Damage Eliminator",
    Content = "Script cargado - Listo para eliminar TODOS los scripts de da√±o universalmente",
    Duration = 5,
    Image = 4483362458,
})

print("üíÄ Universal Script Damage Eliminator cargado")
print("üöÄ Usa 'ACTIVAR SCRIPT COMPLETO AUTOM√ÅTICO' para la funcionalidad completa")
print("üîÑ O activa el monitoreo continuo para eliminaci√≥n autom√°tica")
