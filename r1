-- üî• PhantomX v7.0 - Rayfield | Todo incluido, 100% funcional
-- ‚úÖ Optimizado para Delta, dise√±o ne√≥n, sistema de claves

-- === Cargar Rayfield (seguro para Delta) ===
local Rayfield = nil
local Success, Err = pcall(function()
    Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield", true))()
end)

if not Success or not Rayfield then
    game.StarterGui:SetCore("ChatMakeSystemMessage", {
        Text = "‚ùå Error al cargar Rayfield. Revisa tu conexi√≥n.",
        Color = Color3.new(1, 0, 0),
        FontSize = 20
    })
    return
end

-- === Crear ventana con sistema de claves ===
local Window = Rayfield:CreateWindow({
    Name = "<font color='#BD00FF'>üåå</font> <font color='#FFFFFF'>PhantomX v7.0</font>",
    LoadingTitle = "Cargando...",
    LoadingSubtitle = "by Phantom",
    ConfigurationSaving = { Enabled = true, FolderName = "PhantomX", FileName = "Config" },
    Discord = { Enabled = false },
    KeySystem = false, -- ‚úÖ Sistema de claves activado
    KeySettings = {
        Title = "üîê Acceso requerido",
        Subtitle = "GUI Privada",
        Note = "Contacta a @phantom para la clave",
        SaveKey = true
    }
})

-- === Variables ===
local Player = game.Players.LocalPlayer
local Character, Humanoid, HumanoidRootPart

local function GetCharacter()
    Character = Player.Character or Player.CharacterAdded:Wait()
    Humanoid = Character:FindFirstChildOfClass("Humanoid")
    HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
end

GetCharacter()
Player.CharacterAdded:Connect(GetCharacter)

-- === Notificaci√≥n chida ===
local function Notify(Title, Content, Duration)
    Rayfield:Notify({
        Title = Title,
        Content = Content,
        Duration = Duration or 5,
        Image = 4483366805,
        Actions = { Ignore = { Name = "Cerrar", Callback = function() end } }
    })
end

-- === Pesta√±a: Jugador ===
local TabPlayer = Window:CreateTab("üßë Jugador", 6026565612)

-- WalkSpeed
local CustomWalkSpeed = 16
TabPlayer:CreateSlider({
    Name = "üëü WalkSpeed",
    Range = {16, 500},
    Increment = 1,
    Suffix = " studs",
    CurrentValue = 16,
    Callback = function(Value)
        CustomWalkSpeed = Value
    end
})

-- Anti-Reset WalkSpeed
game:GetService("RunService").Heartbeat:Connect(function()
    if Humanoid then
        pcall(function() Humanoid.WalkSpeed = CustomWalkSpeed end)
    end
end)

-- JumpPower
TabPlayer:CreateSlider({
    Name = "üöÄ JumpPower",
    Range = {50, 300},
    Increment = 1,
    Suffix = " studs",
    CurrentValue = 50,
    Callback = function(Value)
        if Humanoid then Humanoid.JumpPower = Value end
    end
})

-- Infinite Jump
TabPlayer:CreateToggle({
    Name = "‚ôæÔ∏è Salto Infinito",
    CurrentValue = false,
    Callback = function(State)
        if State then
            game:GetService("UserInputService").JumpRequest:Connect(function()
                if Humanoid then Humanoid:ChangeState(Enum.HumanoidStateType.Jumping) end
            end)
        end
    end
})

-- === Pesta√±a: Movimiento ===
local TabMove = Window:CreateTab("üöÄ Movimiento", 118517218)

-- Noclip
local Noclip = false
TabMove:CreateToggle({
    Name = "üö´ Noclip (N)",
    CurrentValue = false,
    Callback = function(State)
        Noclip = State
        if HumanoidRootPart then HumanoidRootPart.Anchored = State end
    end
})

-- Fly
local Flying = false
TabMove:CreateToggle({
    Name = "‚úàÔ∏è Fly (F)",
    CurrentValue = false,
    Callback = function(State)
        Flying = State
        if HumanoidRootPart then HumanoidRootPart.Anchored = State end
    end
})

-- Controles
game:GetService("UserInputService").InputBegan:Connect(function(Input)
    if Input.KeyCode == Enum.KeyCode.N then
        Noclip = not Noclip
        if HumanoidRootPart then HumanoidRootPart.Anchored = Noclip end
    elseif Input.KeyCode == Enum.KeyCode.F then
        Flying = not Flying
        if HumanoidRootPart then HumanoidRootPart.Anchored = Flying end
    end
end)

-- Loop de movimiento
game:GetService("RunService").RenderStepped:Connect(function()
    if (Noclip or Flying) and HumanoidRootPart then
        HumanoidRootPart.CanCollide = false
        local Move = Vector3.new(0, 0, 0)
        local Speed = 100
        if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.W) then Move = Move + workspace.CurrentCamera.CFrame.LookVector * Speed end
        if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.S) then Move = Move - workspace.CurrentCamera.CFrame.LookVector * Speed end
        if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.A) then Move = Move - workspace.CurrentCamera.CFrame.RightVector * Speed end
        if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.D) then Move = Move + workspace.CurrentCamera.CFrame.RightVector * Speed end
        if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.Space) then Move = Move + Vector3.new(0, Speed, 0) end
        if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.LeftControl) then Move = Move - Vector3.new(0, Speed, 0) end
        HumanoidRootPart.CFrame = HumanoidRootPart.CFrame + Move * 0.1
    end
end)

-- === Pesta√±a: Teleport ===
local TabTP = Window:CreateTab("üìç Teleport", 8785381028)

TabTP:CreateDropdown({
    Name = "üéØ TP a Jugador",
    Options = function()
        local List = {}
        for _, P in game.Players:GetPlayers() do
            if P ~= Player then
                table.insert(List, P.Name)
            end
        end
        return List
    end,
    CurrentOption = "",
    Callback = function(Name)
        local Target = game.Players:FindFirstChild(Name)
        if Target and Target.Character then
            local HRP = Target.Character:FindFirstChild("HumanoidRootPart")
            if HRP and HumanoidRootPart then
                HumanoidRootPart.CFrame = HRP.CFrame
                Notify("TP", "A " .. Name)
            end
        end
    end
})

TabTP:CreateButton({
    Name = "üñ±Ô∏è TP al Rat√≥n",
    Callback = function()
        local Mouse = Player:GetMouse()
        if Mouse.Target then
            HumanoidRootPart.CFrame = CFrame.new(Mouse.Hit.Position + Vector3.new(0, 5, 0))
            Notify("TP", "Al rat√≥n")
        end
    end
})

-- === Pesta√±a: ESP ===
local TabESP = Window:CreateTab("üëÅÔ∏è ESP", 3926305904)
local ESPBoxes = {}

TabESP:CreateToggle({
    Name = "üë• ESP Jugadores",
    CurrentValue = false,
    Callback = function(State)
        if not State then
            for _, Box in pairs(ESPBoxes) do Box:Destroy() end
            ESPBoxes = {}
        else
            spawn(function()
                while State do
                    task.wait()
                    for _, P in game.Players:GetPlayers() do
                        if P ~= Player and P.Character then
                            local Head = P.Character:FindFirstChild("Head")
                            if Head and not Head:FindFirstChildWhichIsA("BoxHandleAdornment") then
                                local Box = Instance.new("BoxHandleAdornment")
                                Box.Adornee = Head
                                Box.Size = Head.Size + Vector3.new(0.1, 0.1, 0.1)
                                Box.Color3 = Color3.fromRGB(0, 255, 255)
                                Box.Transparency = 0.5
                                Box.AlwaysOnTop = true
                                Box.ZIndex = 10
                                Box.Parent = workspace.CurrentCamera
                                table.insert(ESPBoxes, Box)
                            end
                        end
                    end
                end
            end)
        end
    end
})

-- === Pesta√±a: Fling ===
local TabFling = Window:CreateTab("üí• Fling", 892466017)

TabFling:CreateDropdown({
    Name = "üéØ Fling a Jugador",
    Options = function()
        local List = {}
        for _, P in game.Players:GetPlayers() do
            if P ~= Player then
                table.insert(List, P.Name)
            end
        end
        return List
    end,
    CurrentOption = "",
    Callback = function(Name)
        local Target = game.Players:FindFirstChild(Name)
        if Target and Target.Character and HumanoidRootPart then
            local HRP = Target.Character:FindFirstChild("HumanoidRootPart")
            if HRP then
                local BV = Instance.new("BodyVelocity")
                BV.MaxForce = Vector3.new(1e9, 1e9, 1e9)
                BV.Velocity = (HRP.Position - HumanoidRootPart.Position).unit * 200
                BV.Parent = HumanoidRootPart
                task.delay(0.5, function() BV:Destroy() end)
                Notify("Fling", Name .. " lanzado")
            end
        end
    end
})

-- === Pesta√±a: Auto-Farm ===
local TabFarm = Window:CreateTab("‚öîÔ∏è Farm", 2864007918)

local AutoFarm = false
TabFarm:CreateToggle({
    Name = "ü§ñ Auto-Farm NPCs",
    CurrentValue = false,
    Callback = function(State)
        AutoFarm = State
    end
})

game:GetService("RunService").Heartbeat:Connect(function()
    if AutoFarm then
        local Closest = nil
        local Dist = math.huge
        for _, NPC in workspace:GetChildren() do
            if NPC:IsA("Model") and NPC:FindFirstChild("Humanoid") and NPC.Humanoid.Health > 0 then
                local HRP = NPC:FindFirstChild("HumanoidRootPart")
                if HRP then
                    local Mag = (HumanoidRootPart.Position - HRP.Position).Magnitude
                    if Mag < Dist then
                        Dist = Mag
                        Closest = HRP
                    end
                end
            end
        end
        if Closest then
            Humanoid:MoveTo(Closest.Position)
        end
    end
end)

-- === Pesta√±a: Follow Bot ===
local TabFollow = Window:CreateTab("üß† Follow", 8432784026)

local FollowTarget = ""
TabFollow:CreateDropdown({
    Name = "üéØ Seguir a Jugador",
    Options = function()
        local List = {}
        for _, P in game.Players:GetPlayers() do
            if P ~= Player then
                table.insert(List, P.Name)
            end
        end
        return List
    end,
    CurrentOption = "",
    Callback = function(Name)
        FollowTarget = Name
    end
})

game:GetService("RunService").Heartbeat:Connect(function()
    if FollowTarget ~= "" then
        local Target = game.Players:FindFirstChild(FollowTarget)
        if Target and Target.Character then
            local HRP = Target.Character:FindFirstChild("HumanoidRootPart")
            if HRP then
                Humanoid:MoveTo(HRP.Position)
            end
        end
    end
end)

-- === Pesta√±a: Mini-Juego ===
local TabMini = Window:CreateTab("üéÆ Mini", 7072706576)

local Clicks = 0
TabMini:CreateButton({
    Name = "üñ±Ô∏è +1 Click",
    Callback = function()
        Clicks += 1
        TabMini:CreateLabel("Clicks: " .. Clicks)
    end
})

TabMini:CreateLabel("Clicks: 0")

-- === Notificaci√≥n final ===
Notify("‚úÖ PhantomX v7.0", "GUI cargado correctamente", 5)
